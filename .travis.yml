language: go
go:
- '1.5'
sudo: true
dist: precise
group: edge
env:
  global:
  - CF_APP=go-cloudant
  - CF_SPACE=demos
  - secure: "F19BA3Aw3aE0AZSO4zsVOjezQ1y9zkN0RaCZsDcHpTiGwyRd2fvTB/2QHSR6j8ARox4lTuDDQCGyeMegda/k0pIvBDIc6rvh28LwukjJYodAPNLj04cWfTJC4U1QsR9rwkSZ0JQModc62vrBRf2h9i19otp/lWkwDe7dyvCtBzwCaBNYOV+hi3XtIuu+E6XUIV6t6yBJQimZdcHG0N00jzC3pHQF1wgxW7R9Xf3uNiZb++20z+Fei49m2zS8W73JIR2R7QqcuwK0bynmbjxatpsI5NVSVTZPkLvfrNmjQpqDLi78ol2aLq2Ym2rPFcnAdBaBEja0VilA1zSzBUwEP4l1CXZ4Ax6LbqX1aQkgGbwyusdQac7WlBs7cyPdaQmhzSMe2KBWahbhQgNm5kU8dV/YMWJ++obyaT1B7ASXGHLE0M9URKdsPTPpD0wF0YNwMsSFeCu3aYelM+V6jC1QaAJN+urHab/RjJ84x23/zmbMZ7T9qk/QCrtupC25Bw2nP/yFIpApjqxjLlFmbvxKNkRRyLC27d0S1Cp9QitkVIIA4rIYJztlH3EmywydyJucf9rpE60wRD0394snB35GUFQoP2rhnLs1qS4vvdaH1QA6xaoc9jKOJ9JFE25g53ZDDAnjy6nNvHt31WTPHQH7ABev4m9XANYFmbA4sb0dEYQ="
  - secure: "STZbUsUJnLYa6iAsP9tep+s1oxYLAjPLVWh8z5Ju1gE4WbODLBcf6idURUOQ7nuE4Kcs/aQ61pooUOpugFbm8edDQ5QSWWhLw8QKqXg3MPRhZopZVSZgw9MRrAR2bWAF8LAosLJmCmeSwS1b/RI29MHb8mQ+kmqDO1qJgVkIlxSx14/GYp3Qtdmyt1DeUh4OOnMuwJOTxO7himBXoz1SVs5nTicuerNEspykWyIEpbzDguLW7r+IYWI4pS8o4f3OAGikz1kvfiOGfcFm3h5GlsuXFW++1301uL7NSrfvX3HN90u61XrPzvxB25U5kirsEW4gvcwLEbHHwkYCaa5D2cZqc8mgr6A+g56p7vXKh+CGxJPCLfJSkH116XkqUc5D4TKP1LmXk2GWzq1VmHez7e20PGJq1Hxa8PyNF0HLbrCzKdWjEptYr1lFm3fvJ2U3HaB/zVcOuQEMvZ+B2rTNrGVrMDrGOmKcsGN7lUNZ3VEafl5tuzmNfAIVhTc5c6bP1QXm/tZJBt9s7r1D4iJ+PxriEuVxQtn1doAFWpygFMuxXNcASni5/Rfn5kvR9ut76OaPrC1fVAoCrKQHxQW2DBebhRQ83MTJcyzOLyT42cZJiye3/WMZ/V9F04/jd+ZE61EuvfpFvuB2ycKODGFNtsnXlKqzyWl5AAl3C9fIG7A="
  - secure: "ocMPWmY5mOQMPwtNISKAualjH2XqAnLNVeje+IWUp1pfGrw4CXmpA3/WLAKn1ph4204sFsS98mG1LIRi6d8xfypB0kBtKyo+K+fKcp+bkSwcDZetl5/owaP36OquN2P/XCHN6aK4nFgb4eSDwhtiDNmElIIyWb62SfL+bBkNCw/WFz7YAlWRpwSbCfU1SjfYDxhTZih0VMtx/Z7s4u7q51BPlJ17eX7XwEyLH5CoRdF6OpPctluF51dAPrnEt2p4CPz421LOlw7YHrSAUjVpSE9jWj5CMMv8c96H4H+9hmAoy4aXN9cUq5oYdfEjF6vw/Em75/OQUwzxOBNGfIno34rQOQhbKrFcrMuyIo6/7uEkHrqhINFeuGiRXdDm47cPqczDbQdva23B/90jfbM3MklZ8QU6ASizwBc5fvq0ul1Wr8DGiEf705GLlx920HtTa2Tk7Hq240C+I1S+kxaASzpQFJmNPvImm+8GZ1Vtl+rMFDKax/TUGe5QgAJdD/mThIyLHAbjQ2ECbR7Kb2RCaWS5M0Q6o8vksnuDj9CeNrACE5uEcRBcddVq6lU6fyvhcrcC4VuVJHZWuha6ZxjwVjhaDbiuJlJcZ7K7h7rwJxSNsBRrbneqhDs59R8r84uTmnqQlVa/h4sv/ZYCUTkFbDQqgCjTz1RgFY+A40IIgMA="
before_install: npm install -g bower
before_deploy: npm install -g https://github.com/18F/cf-blue-green/tarball/env-var-domain
deploy:
  provider: script
  script: bower install && ls -lah /home/travis/gopath/src/github.com/IBM-Bluemix/go-cloudant/public/vendor/ && export CF_API=https://api.ng.bluemix.net && export B_DOMAIN=mybluemix.net && cf-blue-green-travis && export CF_API=https://api.eu-gb.bluemix.net && export B_DOMAIN=eu-gb.mybluemix.net && cf-blue-green-travis && export CF_API=https://api.au-syd.bluemix.net && export B_DOMAIN=au-syd.mybluemix.net && cf-blue-green-travis
  on:
    branch: master
    repo: IBM-Bluemix/go-cloudant
